<!doctype html>
<html>

<head>
    <title>Sacon - Search</title>
    <link rel="icon" href="{{ url_for('static', filename='cropped-saconlogo-small-32x32.png') }}" sizes="32x32">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet"
        id="bootstrap-css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"> </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">

    <link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet" type="text/css">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='main.css') }}">


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="https://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <style>
        @media only screen and (max-width: 600px) {
            .view-button {
                width: 20% !important;
            }
        }

        .view-button {
            width: 85px;
            border-radius: 12px;
            border: none;
            right: 0;
            margin-left: 10px;
            margin-right: 10px;
            background: #bbdefb;
            position: absolute;
        }

        .individual-result {
            display: flex;
            padding: 20px;
            margin-top: 18px;
            border-radius: 12px;
            position: relative;
        }

        .search-result:hover {
            box-shadow: 0 6px 14px 0 rgba(0, 0, 0, 0.1);
        }

        .result-text {
            width: 80%;
        }

        .search-result {
            box-shadow: 0 3px 8px 0 rgba(0, 0, 0, 0.1);
            transition: 0.3s;
            color: white;
            width: 100%;
            border-radius: 10px;
            margin: 0 auto;
            padding-top: 150px;
            padding-left: 20px;
            padding-right: 20px;
            margin-top: 50px;
            padding-bottom: 150px;
        }
    </style>


</head>

<body background-color="red" data-spy="scroll" data-target="#navbar" id="los" data-offset="150">
    <div class="jumbotron" style="padding: 0%;">
        <div id="top">
            <image src="{{ url_for('static', filename='saconlogo.png') }}" class="img-responsive  center-block"
                alt="Responsive image" height=80></image>
        </div>

        <nav class="navbar  navbar-expand-md navbar-dark bg-success" style="padding-top: 0%;">

            <a class="navbar-brand" href="https://www.sacon.in/">
                SACON - Home
            </a>

            <button type="button" class="navbar-toggler"
                style="position: absolute; right: 0;top: 0; margin-top: 4%; margin-right: 4%;" data-toggle="collapse"
                data-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>


            <div class="navbar-collapse collapse w-100 order-3 dual-collapse2" id="navbarCollapse">
                <ul class="navbar-nav ml-auto nav-content-responsive">
                    <!-- <li class="nav-item active">
                        <a class="nav-link" href="https://www.sacon.in/">Home
                            <span class="sr-only">(current)</span>
                        </a>
                    </li> -->
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#search">Search</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
        </nav>


        <div class="container" id="about" style="top: -20;">
            <div class="row">
                <div class="col-sm"></div>
                <div class="col-sm">
                    <h1 class="display-3" style="color:white; font-size:85px;">SACON</h1>

                    <p style="color:white; font-size:28px" class="lead">Compendium of Theses and Dissertations on Indian
                        Birds
                    </p>
                    <br />
                    <p style="color:white"> This is an open-access web portal on theses and dissertations of Indian
                        ornithology from various institutions of higher education and research. This is an initiative of
                        National Ornithological Databank (NOD) Cell, SACON and serves as a single reference window to
                        the studies on Indian birds conducted as part of Ph.D., M.Phil., and M.Sc. courses in
                        universities and other academic institutions.</p>
                    <p style="color:white">Users may search the database with keywords (that may include terms referring
                        to landscapes, habitats, bird species, bird behaviour, ecology, and conservation) to view the
                        full citations of theses and dissertations with abstracts.</p>
                    <p style="color:white">This is a work in progress. Kindly bring to our attention, if there are any
                        missing works, with basic bibliographic information (and abstracts if possible) so that they can
                        be added to the database. Please send us your suggestions and queries
                        <a href="mailto:nod.sacon@gmail.com?subject=Query" target="_blank">here
                        </a>
                        <nod.sacon@gmail.com>.
                    </p>
                </div>
            </div>
        </div>


        <!--<div class="container">
            <div class="row" id="appSummary">
                <h1 class="display-3" style="color:bisque"><br />Why This Is Awesome</h1>
                <p class="lead" style="color:bisque">Because, No other Indian Website have this feature to search for
                    bird thesis</p>
            </div>
        </div>-->

    </div>
    <div class="container" id="search">
        <div class="row">
            <div class="search-css">
                <div class="input-group" id="adv-search">
                    <div class="page-header">
                        <h1>Search for thesis!</h1>
                    </div><br />
                    <div class="col-sm-12">
                        <form class="form-inline" method="GET">
                            <input type="text" name="key" id="search_text" placeholder="Search">
                            <span class="btn btn-primary search-btn-main">Search</span>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div style="box-shadow: 0 3px 8px 0 rgba(0, 0, 0, 0.1);
        transition: 0.3s;
        color: white;
        width: 100%;
        border-radius: 10px;
        margin: 0 auto;
        padding-top: 150px;
        padding-left: 20px;
        padding-right: 20px;
        margin-top: 50px;
        padding-bottom: 150px;padding-top:20px; padding-bottom:30px;">

            <div id="result" style="color:black;">
                Result will appear here..
            </div>

        </div>
    </div>
    <div id="id01" class="modal" style="background-color:rgb(39, 42, 43,0.9);">
        <nav class="navbar navbar-light bg-dark justify-content-between" style="top: 0;position: absolute;width: 100%;">
            <span class="navbar-brand text-light" style="">Search Result</span>
            <a href="" id="download" style="position: absolute;right: 55px;top: 2rem;" download>
                <i class="fa fa-download fa-2x"></i>
            </a>
            <span onclick="document.getElementById('id01').style.display='none'" class="close"
                title="Close Modal">&times;</span>

        </nav>


        <div class="container"
            style="padding-bottom:56.25%; position:relative; display:block; width: 100%;height: 100%;"
            id="frame-wraper">
            <iframe class="responsive-iframe" width="100%" height="100%"
                src="https://www.africau.edu/images/default/sample.pdf" frameborder="1" id="frame" frameborder="0"
                allowfullscreen="" style="position:absolute; top:0; left: 0" allowfullscreen>
            </iframe>
            <span class="d-flex justify-content-center" style="padding-top: 40%;font-weight: bold;color:#1ac1b3;">This
                may take some time!!!
            </span>
            <div class="d-flex justify-content-center" style="display: none;color:#c1461a;padding-top: 10%;"
                id="spinner">

                <div class="spinner-border" style="width: 6rem; height: 6rem;" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>

        </div>

    </div>

    <div class="row"
        style="background-color:#4f98ca;color:white;padding-bottom:90PX; padding-left:50px;padding-top:60px;padding-right:30px; margin-top:30px;margin-right:0px;">
        <div class=".col-md-8">
            <h2 style="color:rgb(247, 245, 245);"><b>Do you wish to index your thesis? </b></h2>
            <h5>
                <p style="font-size: 17px;">Please, send us the bibliographic details about your thesis including the
                    abstract/summary.
            </h5>
        </div>
        <span style="border-left: 5px solid #c1461a; margin-left:20px;padding-right:30px;"></span>
        <div class=".col-md-4" style="padding-top:10px;padding-left:0px;">
            <h3>Click to mail us..</h3>
            <a href="mailto:nod.sacon@gmail.com?subject=Thesis on board" target="_blank" class="btn btn-primary"><i
                    class="fa fa-envelope"></i></a>
        </div>

    </div>
    <footer class="footer-distributed" id="contact" style="margin-top:0;">
        <div class="footer-center">

            <div>
                <i class="fa fa-map-marker"></i>
                <p>
                    <span> National Ornithological Databank (NOD) Cell</span>
                    <span> Sálim Ali Centre for Ornithology and Natural History (SACON)</span>
                    <span> Anaikatty (POST)</span>
                    <span> Coimbatore-641108</span>
                    Tamil Nadu, India.
                </p>
            </div>

            <div style="margin-top: 15px;">
                <i class="fa fa-phone"></i>
                <a href="tel:0422-2203127">0422-2203127</a>
            </div>
        </div>

        <div class="footer-right">

            <!-- <p class="footer-company-about">
					<span>About the company</span>
					Lorem ipsum dolor sit amet, consectateur adispicing elit. Fusce euismod convallis velit, eu auctor lacus vehicula sit amet.
				</p> -->
            <span class="footer-company-about">
                <span>Design and Development by</span>
                Shakileash C &nbsp;&nbsp;<a href="https://github.com/Shakileash5"
                    style="color: white;font-size: 18px;"><i class="fa fa-github fa-1x"></i></a> &nbsp;&nbsp;<a
                    href="https://www.linkedin.com/in/shakileash-chinraj-232139170"
                    style="color: white;font-size: 18px;"><i class="fa fa-linkedin"></i></a><br>
                Priyesh Kumar K &nbsp;&nbsp;<a href="https://github.com/Priyesh-Kumar-K"><i class="fa fa-github"
                        style="color: white;font-size: 18px;"></i> &nbsp;&nbsp;<a
                        href="https://www.linkedin.com/in/priyesh--kumar/" style="color: white;font-size: 18px;"><i
                            class="fa fa-linkedin"></i></a></a><br>
                Department of ECE, <br>
                Department of Computing, <br>
                Coimbatore Institute of Technology
                <br><br>
                <span>Photo Credits</span>
                Photo: Common Iora <i style="font-style: italic;">Aegithinia tiphia</i><br>
                PC@Jeevith.S.
            </span>
            <div class="footer-icons">

                <a href="https://twitter.com/SACONCoimbatore?s=08"><i class="fa fa-twitter"></i></a>
            </div>

        </div>

    </footer>


</body>

</html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.3/pdfobject.min.js"
    integrity="sha512-bHO4iqeyo1tN+C4qnbroCQ5Hxi3aJcEszT0iOt2nkuXZXQf369U3PUsnoN/ebnKQ5V2iS326OIv9pgXxL+F/kQ=="
    crossorigin="anonymous">
    </script>

<script>
    var flagCount = 0;
    var timerId = 0;
    var Globalurl = "";
    var pallet = ["#9C0404", "#774023", "#93DBE9"]

    $(document).ready(function () {
        document.cookie = document.cookie + 'SameSite=None; Secure';
        $('#search_text').keyup(function (e) {
            var name = $('#search_text').val();
            //console.log(event.keyCode)
            if (name != "") {
                $.ajax({
                    type: 'post',
                    url: "/search",
                    data: { name: name },
                    success: function (response) {
                        if (response == "500") {
                            console.log("Something went wrong!!")
                        }
                        else {
                            res = JSON.parse(response)
                            keys = Object.keys(res)
                            //console.log(keys.length);
                            var convert = ""
                            if (keys.length == 0) {
                                convert = "<br> No Such data is found !!!";
                            }
                            else {
                                for (var i = 0; i < keys.length; i++) {
                                    var label = res[keys[i]][8]
                                    convert = convert + '<div class="individual-result"> <div class="result-text">  ' + res[keys[i]][0] + ' - ' + res[keys[i]][1] + ' - ' + res[keys[i]][2] + ' - ' + res[keys[i]][3] + ' - ' + res[keys[i]][4] + ' - ' + res[keys[i]][5] + ' - ' + res[keys[i]][6] + ' - ' + res[keys[i]][7] + ' - ' + res[keys[i]][8] + '</div> <button class="view-button" data-label="' + label + '" onClick = "myclick(this)"> View </button> </div>';
                                }
                            }

                            $('#result').html(convert);
                        }
                    }
                });
            }
            else {
                $('#result').html('<div class="individual-result"> <div class="result-text">Results will appear here </div></div> ');
            }

        });



    });
    // Get the modal
    var modal = document.getElementById('id01');

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
            clearInterval(timerId);
        }
    }
    function myclick(data) {
        var Label_name = data.getAttribute("data-label");
        //console.log(Label_name);
        url = "https://firebasestorage.googleapis.com/v0/b/sacon-250805.appspot.com/o/TD-000005.pdf?alt=media";
        $.ajax({
            type: 'post',
            url: "/get_file",
            data: { name: Label_name },
            success: function (response) {

                if (response == "500") {

                    console.log("Data Not Found");
                }
                else {
                    url = response;
                    //console.log(url);
                }

                download = document.getElementById("download");
                //var anchor = document.getElementById("open");

                //console.log(url);
                url_split = url.split("?alt")[0]
                file_name = url_split.split("/").pop()
                extention = file_name.split(".")[1]
                //console.log(extention)
                let mobile = isMobile();

                if (extention == "pdf") {

                    if (mobile == true) {
                        Globalurl = "https://docs.google.com/gview?url=" + url + "&embedded=true";
                    }
                    else {

                        Globalurl = url;
                    }

                    //anchor.href = url;
                    download.style.display = "none";
                }
                else if (extention == "docx") {
                    Globalurl = "https://view.officeapps.live.com/op/embed.aspx?src=" + url;
                    download.href = url;
                    download.style.display = "block";
                }
                else {
                    Globalurl = "https://docs.google.com/gview?url=" + url + "&embedded=true";
                }

                document.getElementById("frame").src = Globalurl;
                var wrapper = document.getElementById("frame-wraper");
                var frame = document.getElementById("frame");

                wrapper.removeChild(frame);

                var iframe = document.createElement('iframe');
                iframe.id = "frame";
                iframe.class = "responsive-iframe";
                iframe.width = "100%";
                iframe.height = "100%";
                iframe.src = Globalurl;

                iframe.style = "position:absolute; top:0; left: 0";
                iframe.allowFullscreen = true;
                iframe.frameBorder = "1";

                wrapper.appendChild(iframe);

                document.getElementById("id01").style.display = "block";
                if (extention == "pdf") {
                    timerId = setInterval("reloadIFrame();", 4000);
                }
                else {
                    timerId = setInterval("reloadIFrame();", 2000);
                }

            }
        });

    }
    function isMobile() {
        var check = false;
        (function (a) {
            if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4)))
                check = true;
        })(navigator.userAgent || navigator.vendor || window.opera);
        return check;
    };

    function reloadIFrame() {

        var iframe = document.getElementById("frame");//work control
        var spinner = document.getElementById("spinner");

        if (iframe.contentWindow.length == 0) {

            spinner.style.display = "block";
            if (pallet.length > 0) {
                spinner.style.color = pallet.pop();

            }
            else {
                pallet = ["#9C0404", "#774023", "#93DBE9"];
            }

            flagCount = flagCount + 1;
            iframe.src = iframe.src;
            var wrapper = document.getElementById("frame-wraper");
            var frame = document.getElementById("frame");
            wrapper.removeChild(frame);
            var iframe = document.createElement('iframe');
            iframe.id = "frame";
            iframe.class = "responsive-iframe";
            iframe.width = "100%";
            iframe.height = "100%";
            iframe.src = Globalurl;
            iframe.style = "position:absolute; top:0; left: 0";
            iframe.allowFullscreen = true;
            iframe.frameBorder = "1";
            wrapper.appendChild(iframe);


            //console.log("Lets Try again!", flagCount, Globalurl, iframe.src);
        }
        else {
            spinner.style.display = "none";
            pallet = ["#9C0404", "#774023", "#93DBE9"]
            clearInterval(timerId);
        }



    }


</script>